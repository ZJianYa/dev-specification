# 概述

登录是一个简单而又十分复杂的问题

## 登录

登录/记住用户名  
  何记住用户名，本地存储用户名密码，还是token，还是加密后的用户名密码  
注册  
忘记密码  
验证码/短信验证码  
异地登录提示 

### Session

有些系统为了降低开销，对于未登录的访问，不予分配session，那么如何确定验证码的归属？  
可以采用key/value的方式，且key是有有效期的。  

1. session以浏览器进程为标志？  
2. 验证码针对每次(登录)请求都必须验证，且必须立即失效
3. 所有绕过前端界面直接访问后台接口的操作都视为威胁

....如果一个IP未登录，则不予分配session，session也是资源  
....如果IP不断的使用不存在的session来碰撞，那么这个IP就应该被封堵。

### 票据类型

#### Session ID

#### Token

## 会话管理

### SSO CAS OAuth

### 传统Session

### Token方式

http://www.cnblogs.com/menyiin/p/token.html token原理
https://www.v2ex.com/amp/t/370615 自动更新有效期

- 安全性  
  在我看来Token是对Session方式的拓展，一定有类似ticket的内容包含在Token中，且ticket是由服务端生成的。  
  服务端一定还保留了Token的MD5值来保证信息的可靠性，客户端伪造的信息是无法匹配的。  
  因此Token安全性和Session基本上是一致的。你可以很容易伪造出一个合规的token，却很难造出一个可用的token。  

- 有效期问题  
  过期处理策略是比较麻烦的，主要是有效期刷新的问题。究竟是应该在客户端刷新，还是在服务端刷新？  
  在并发的情况下，在多请求的情况下是否都可以保证Token更新和验证的线程安全。  

## 权限信息是否要保留本地

如果直接存储权限信息不是不可能，但是相对而言会比较复杂  
因为任何缓存会引入缓存失效问题  
